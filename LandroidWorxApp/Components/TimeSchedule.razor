@using LandroidWorxApp.BusinessLogic

<Row Class="mt-4">
    <Column ColumnSize="ColumnSize.Is4">
        <Field>
            <FieldLabel>Time Start</FieldLabel>
            <TextEdit Class="timepicker" Placeholder="00:00" Text="@Planning.TimeStart.ToString(@"hh\:mm")"  TextChanged ="SetTime" >
            </TextEdit>
        </Field>
    </Column>
    <Column ColumnSize="ColumnSize.Is4">
        <Field>
            <FieldLabel>Duration</FieldLabel>
            <NumericEdit TValue="int" @bind-Value="Planning.Duration" />
        </Field>
    </Column>
    @if (Config.MultiZones.Count() > 0)
    {
        <Column ColumnSize="ColumnSize.Is4">
            <Field>
                <FieldLabel>Zone</FieldLabel>
                <SelectEdit TValue="int" @bind-SelectedValue="Planning.Zone">
                    @foreach (var item in Config.MultiZones)
                    {
                        if (item > 0)
                        {
                            <SelectItem Value="Config.MultiZones.ToList().IndexOf(item)">@(Config.MultiZones.ToList().IndexOf(item) + 1)</SelectItem>
                        }
                    }
                </SelectEdit>
            </Field>
        </Column>
    }

</Row>

@code {

    [Parameter]
    public TimePlanning_BL Planning { get; set; }

    [Parameter]
    public LandroidWorxApp.BusinessLogic.Config Config { get; set; }

    private void SetTime(string value)
    {
        Planning.TimeStart = TimeSpan.TryParse(value, System.Globalization.CultureInfo.CurrentCulture, out TimeSpan result) ? result : new TimeSpan();
    }
}
