@page "/Login"
@using LandroidWorxApp.BusinessLogic
@using Microsoft.Extensions.Configuration
@using Microsoft.AspNetCore.Http
@inject ILsClientWeb LsClientWeb
@inject IConfiguration Configuration
@inject IJSRuntime JsRuntime


<Row Class="justify-content-center">
    <Column ColumnSize="ColumnSize.IsAuto">
        <Field>
            <FieldLabel>Username</FieldLabel>
            <TextEdit @bind-Text="Username">
            </TextEdit>
        </Field>
        <Field>
            <FieldLabel>Password</FieldLabel>
            <TextEdit Role="TextRole.Password" @bind-Text="Password">
            </TextEdit>
        </Field>
        <Field>
            <CheckEdit @bind-Checked="RememberMe">Remember me</CheckEdit>
        </Field>

        <Button Color="Color.Info" Clicked="LoginUser">Login</Button>
    </Column>
</Row>

@code {

    string Username;
    string Password;
    bool RememberMe;

    private async void LoginUser()
    {
        var interop = new Interop(JsRuntime);
        string antiforgerytoken = await interop.GetElementByName("__RequestVerificationToken");
        var fields = new { __RequestVerificationToken = antiforgerytoken, username = Username, password = Password, rememberMe = RememberMe };
        await interop.SubmitForm("/loginaction/", fields);
    }

}
